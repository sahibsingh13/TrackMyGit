{% extends 'base.html' %}
{% block content %}
<div class="pb-10">
    <!-- Page Header -->
    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-bold text-gray-900">Dashboard</h1>
            <p class="text-gray-600">Welcome back, {{ request.user.username }}! Here's your contribution overview.</p>
        </div>
        <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md px-4 py-2 flex items-center gap-2 transition-colors"
                onclick="window.location.reload()">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
            Refresh Data
        </button>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
         id="dashboard-stats-container"
         hx-get="/partials/dashboard/stats/"
         hx-trigger="load"
         hx-swap="outerHTML"
         hx-target="#dashboard-stats-container">
        <!-- Total Contributions Card -->
        <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-100">
            <div class="animate-pulse">
                <div class="h-8 bg-gray-200 rounded w-1/3 mb-4"></div>
                <div class="h-10 bg-gray-200 rounded w-1/4 mb-2"></div>
                <div class="h-4 bg-gray-200 rounded w-2/3"></div>
            </div>
        </div>
        
        <!-- Commits Card -->
        <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-100">
            <div class="animate-pulse">
                <div class="h-8 bg-gray-200 rounded w-1/3 mb-4"></div>
                <div class="h-10 bg-gray-200 rounded w-1/4 mb-2"></div>
                <div class="h-4 bg-gray-200 rounded w-2/3"></div>
            </div>
        </div>
        
        <!-- Merge Requests Card -->
        <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-100">
            <div class="animate-pulse">
                <div class="h-8 bg-gray-200 rounded w-1/3 mb-4"></div>
                <div class="h-10 bg-gray-200 rounded w-1/4 mb-2"></div>
                <div class="h-4 bg-gray-200 rounded w-2/3"></div>
            </div>
        </div>
        
        <!-- Current Streak Card -->
        <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-100">
            <div class="animate-pulse">
                <div class="h-8 bg-gray-200 rounded w-1/3 mb-4"></div>
                <div class="h-10 bg-gray-200 rounded w-1/4 mb-2"></div>
                <div class="h-4 bg-gray-200 rounded w-2/3"></div>
            </div>
        </div>
    </div>

    <!-- Contribution Heatmap -->
    <div id="dashboard-contribution-heatmap-container"
         hx-get="/partials/dashboard/contribution-heatmap/"
         hx-trigger="load"
         hx-swap="outerHTML"
         hx-target="#dashboard-contribution-heatmap-container">
        <div class="bg-white rounded-lg shadow-sm border border-gray-100 p-6 mb-8">
            <div class="animate-pulse">
                <div class="h-8 bg-gray-200 rounded w-1/4 mb-4"></div>
                <div class="h-4 bg-gray-200 rounded w-2/3 mb-8"></div>
                <div class="h-6 bg-gray-200 rounded w-1/3 mb-4"></div>
                <div class="grid grid-cols-8 gap-2">
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                </div>
                <div class="h-40 bg-gray-200 rounded mt-4"></div>
            </div>
        </div>
    </div>

    <!-- Trend and Activity Charts -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Trend Chart -->
        <div id="dashboard-trend-chart-container"
             hx-get="/partials/dashboard/trend-chart/"
             hx-trigger="load"
             hx-swap="outerHTML"
             hx-target="#dashboard-trend-chart-container">
            <div class="bg-white rounded-lg shadow-sm border border-gray-100 p-6">
                <div class="animate-pulse">
                    <div class="h-6 bg-gray-200 rounded w-1/3 mb-8"></div>
                    <div class="h-40 bg-gray-200 rounded"></div>
                </div>
            </div>
        </div>
        
        <!-- Activity Chart -->
        <div id="dashboard-activity-chart-container"
             hx-get="/partials/dashboard/activity-chart/"
             hx-trigger="load"
             hx-swap="outerHTML"
             hx-target="#dashboard-activity-chart-container">
            <div class="bg-white rounded-lg shadow-sm border border-gray-100 p-6">
                <div class="animate-pulse">
                    <div class="h-6 bg-gray-200 rounded w-1/3 mb-8"></div>
                    <div class="h-40 bg-gray-200 rounded"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 